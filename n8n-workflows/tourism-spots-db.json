{
  "name": "æ™ºæ…§æ—…æ¸¸-æ™¯ç‚¹æ•°æ®(æ•°æ®åº“)",
  "nodes": [
    {
      "parameters": {
        "httpMethod": "POST",
        "path": "tourism/spots",
        "responseMode": "responseNode",
        "options": {}
      },
      "id": "webhook",
      "name": "Webhook",
      "type": "n8n-nodes-base.webhook",
      "typeVersion": 1.1,
      "position": [250, 300]
    },
    {
      "parameters": {
        "operation": "executeQuery",
        "query": "SELECT * FROM attraction WHERE status = 'open' AND category = 'é©å‘½é—å€' ORDER BY rating DESC",
        "options": {}
      },
      "id": "mysql",
      "name": "MySQL",
      "type": "n8n-nodes-base.mySql",
      "typeVersion": 2.3,
      "position": [450, 300],
      "credentials": { "mySql": { "id": "mysql-jiyi", "name": "MySQL jiyi_tourism" } }
    },
    {
      "parameters": {
        "jsCode": "const spots = $input.all();\nconst icons = {'è¥¿æŸå¡':'ğŸ›ï¸','ç‹¼ç‰™å±±':'â›°ï¸','å†‰åº„':'ğŸš‡','æå¤§é’Š':'ğŸ“š','ç™½æ±‚æ©':'ğŸ¥','ååŒ—å†›åŒº':'ğŸ–ï¸','ç™½æ´‹æ·€':'ğŸš¤','å¡ç½•å':'ğŸŒ²'};\nconst gradients = {'è¥¿æŸå¡':'linear-gradient(135deg,#c41e3a,#8b0000)','ç‹¼ç‰™å±±':'linear-gradient(135deg,#2c5530,#1a3a1c)','å†‰åº„':'linear-gradient(135deg,#5d4e37,#3d3225)','æå¤§é’Š':'linear-gradient(135deg,#1e3a5f,#0d1f33)','ç™½æ´‹æ·€':'linear-gradient(135deg,#1890ff,#096dd9)','å¡ç½•å':'linear-gradient(135deg,#228b22,#006400)'};\nconst slogans = {'è¥¿æŸå¡':'æ–°ä¸­å›½ä»è¿™é‡Œèµ°æ¥','ç‹¼ç‰™å±±':'è‹±é›„å£®ä¸¾ï¼Œæ°”å£®å±±æ²³','å†‰åº„':'åœ°ä¸‹é•¿åŸï¼ŒæŠ—æˆ˜å¥‡è¿¹','æå¤§é’Š':'é“è‚©æ‹…é“ä¹‰ï¼Œå¦™æ‰‹è‘—æ–‡ç« ','ç™½æ´‹æ·€':'ååŒ—æ˜ç ï¼Œæ°´ä¸Šä¼ å¥‡','å¡ç½•å':'è’åŸå˜æ—æµ·çš„ç»¿è‰²å¥‡è¿¹'};\nconst result = spots.map(item => {\n  const s = item.json;\n  let icon='ğŸ›ï¸',gradient='linear-gradient(135deg,#c41e3a,#8b0000)',slogan='çº¢è‰²æ—…æ¸¸èƒœåœ°';\n  for(const k of Object.keys(icons)){if(s.name.includes(k)){icon=icons[k];gradient=gradients[k]||gradient;slogan=slogans[k]||slogan;break;}}\n  return {id:s.id,name:s.name,icon,gradient,slogan,location:s.address,rating:s.rating,isFree:parseFloat(s.ticket_price)===0,needReserve:parseFloat(s.ticket_price)===0,tags:['çº¢è‰²æ–‡åŒ–','çˆ±å›½æ•™è‚²'],introduction:s.description,ticketPrice:s.ticket_price,openingHours:s.opening_hours};\n});\nreturn [{json:{success:true,spots:result}}];"
      },
      "id": "code",
      "name": "æ ¼å¼åŒ–",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [650, 300]
    },
    {
      "parameters": {
        "respondWith": "json",
        "responseBody": "={{ $json }}",
        "options": { "responseHeaders": { "entries": [{ "name": "Access-Control-Allow-Origin", "value": "*" }] } }
      },
      "id": "respond",
      "name": "å“åº”",
      "type": "n8n-nodes-base.respondToWebhook",
      "typeVersion": 1,
      "position": [850, 300]
    }
  ],
  "connections": {
    "Webhook": { "main": [[{ "node": "MySQL", "type": "main", "index": 0 }]] },
    "MySQL": { "main": [[{ "node": "æ ¼å¼åŒ–", "type": "main", "index": 0 }]] },
    "æ ¼å¼åŒ–": { "main": [[{ "node": "å“åº”", "type": "main", "index": 0 }]] }
  },
  "settings": { "executionOrder": "v1" },
  "tags": [{ "name": "tourism" }]
}
