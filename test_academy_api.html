<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ä¼ æ‰¿å­¦é™¢ API æµ‹è¯•</title>
    <style>
        body { font-family: 'Microsoft YaHei', sans-serif; max-width: 1200px; margin: 0 auto; padding: 20px; background: #f5f5f5; }
        h1 { color: #c41e3a; text-align: center; }
        .section { background: white; padding: 20px; margin: 20px 0; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); }
        .section h2 { color: #333; border-bottom: 2px solid #c41e3a; padding-bottom: 10px; }
        button { background: #c41e3a; color: white; border: none; padding: 10px 20px; border-radius: 4px; cursor: pointer; margin: 5px; }
        button:hover { background: #a0182f; }
        .result { background: #f9f9f9; padding: 15px; border-radius: 4px; margin-top: 10px; max-height: 400px; overflow-y: auto; }
        .news-item, .book-item { border-bottom: 1px solid #eee; padding: 10px 0; }
        .news-item:last-child, .book-item:last-child { border-bottom: none; }
        .title { font-weight: bold; color: #333; }
        .meta { color: #999; font-size: 0.9em; margin-top: 5px; }
        .badge { display: inline-block; padding: 2px 8px; border-radius: 10px; font-size: 0.8em; margin-right: 5px; }
        .badge.hot { background: #fff5f5; color: #c41e3a; }
        .badge.top { background: #c41e3a; color: white; }
        .badge.recommend { background: #fff8e1; color: #f5a623; }
        .rating { color: #f5a623; }
        .error { color: red; }
        .success { color: green; }
    </style>
</head>
<body>
    <h1>ğŸ“š æ²³åŒ—çº¢è‰²æ–°é—»ä¸è¯»ç‰© - API æµ‹è¯•</h1>
    
    <div class="section">
        <h2>ğŸ“° çº¢è‰²æ–°é—» API</h2>
        <button onclick="loadNews()">è·å–æ–°é—»åˆ—è¡¨</button>
        <button onclick="loadHotNews()">è·å–çƒ­é—¨æ–°é—»</button>
        <button onclick="searchNews('è¥¿æŸå¡')">æœç´¢"è¥¿æŸå¡"</button>
        <div id="news-result" class="result">ç‚¹å‡»æŒ‰é’®æµ‹è¯•...</div>
    </div>
    
    <div class="section">
        <h2>ğŸ“– çº¢è‰²è¯»ç‰© API</h2>
        <button onclick="loadBooks()">è·å–ä¹¦ç±åˆ—è¡¨</button>
        <button onclick="loadRecommendedBooks()">è·å–æ¨èä¹¦ç±</button>
        <button onclick="searchBooks('ç™½æ´‹æ·€')">æœç´¢"ç™½æ´‹æ·€"</button>
        <div id="books-result" class="result">ç‚¹å‡»æŒ‰é’®æµ‹è¯•...</div>
    </div>
    
    <div class="section">
        <h2>ğŸ”— API ç«¯ç‚¹ä¿¡æ¯</h2>
        <ul>
            <li><strong>æ–°é—»åˆ—è¡¨:</strong> GET /api/academy/news</li>
            <li><strong>çƒ­é—¨æ–°é—»:</strong> GET /api/academy/news/hot</li>
            <li><strong>æœç´¢æ–°é—»:</strong> GET /api/academy/news/search?keyword=xxx</li>
            <li><strong>ä¹¦ç±åˆ—è¡¨:</strong> GET /api/academy/books</li>
            <li><strong>æ¨èä¹¦ç±:</strong> GET /api/academy/books/recommended</li>
            <li><strong>æœç´¢ä¹¦ç±:</strong> GET /api/academy/books/search?keyword=xxx</li>
        </ul>
        <p><strong>åç«¯æœåŠ¡:</strong> http://localhost:8088</p>
        <p><strong>å‰ç«¯ä»£ç†:</strong> http://localhost:3001/api/academy â†’ http://localhost:8088</p>
    </div>

    <script>
        const API_BASE = 'http://localhost:8088';
        
        async function loadNews() {
            const result = document.getElementById('news-result');
            result.innerHTML = 'åŠ è½½ä¸­...';
            try {
                const res = await fetch(`${API_BASE}/api/academy/news`);
                const data = await res.json();
                if (data.success) {
                    result.innerHTML = `<p class="success">âœ… æˆåŠŸè·å– ${data.total} æ¡æ–°é—»</p>` + 
                        data.news.map(n => `
                            <div class="news-item">
                                ${n.isTop ? '<span class="badge top">ğŸ“Œ ç½®é¡¶</span>' : ''}
                                ${n.isHot ? '<span class="badge hot">ğŸ”¥ çƒ­é—¨</span>' : ''}
                                <div class="title">${n.title}</div>
                                <div class="meta">${n.source} | ${n.category} | ğŸ‘ï¸ ${n.viewCount}</div>
                            </div>
                        `).join('');
                } else {
                    result.innerHTML = '<p class="error">âŒ è·å–å¤±è´¥</p>';
                }
            } catch (e) {
                result.innerHTML = `<p class="error">âŒ é”™è¯¯: ${e.message}</p>`;
            }
        }
        
        async function loadHotNews() {
            const result = document.getElementById('news-result');
            result.innerHTML = 'åŠ è½½ä¸­...';
            try {
                const res = await fetch(`${API_BASE}/api/academy/news/hot`);
                const data = await res.json();
                if (data.success) {
                    result.innerHTML = `<p class="success">âœ… æˆåŠŸè·å– ${data.news.length} æ¡çƒ­é—¨æ–°é—»</p>` + 
                        data.news.map(n => `
                            <div class="news-item">
                                <span class="badge hot">ğŸ”¥ çƒ­é—¨</span>
                                <div class="title">${n.title}</div>
                                <div class="meta">${n.source} | ğŸ‘ï¸ ${n.viewCount}</div>
                            </div>
                        `).join('');
                }
            } catch (e) {
                result.innerHTML = `<p class="error">âŒ é”™è¯¯: ${e.message}</p>`;
            }
        }
        
        async function searchNews(keyword) {
            const result = document.getElementById('news-result');
            result.innerHTML = 'æœç´¢ä¸­...';
            try {
                const res = await fetch(`${API_BASE}/api/academy/news/search?keyword=${encodeURIComponent(keyword)}`);
                const data = await res.json();
                if (data.success) {
                    result.innerHTML = `<p class="success">âœ… æœç´¢"${keyword}"æ‰¾åˆ° ${data.total} æ¡ç»“æœ</p>` + 
                        data.news.map(n => `
                            <div class="news-item">
                                <div class="title">${n.title}</div>
                                <div class="meta">${n.source} | ${n.category}</div>
                            </div>
                        `).join('');
                }
            } catch (e) {
                result.innerHTML = `<p class="error">âŒ é”™è¯¯: ${e.message}</p>`;
            }
        }
        
        async function loadBooks() {
            const result = document.getElementById('books-result');
            result.innerHTML = 'åŠ è½½ä¸­...';
            try {
                const res = await fetch(`${API_BASE}/api/academy/books`);
                const data = await res.json();
                if (data.success) {
                    result.innerHTML = `<p class="success">âœ… æˆåŠŸè·å– ${data.total} æœ¬ä¹¦ç±</p>` + 
                        data.books.map(b => `
                            <div class="book-item">
                                ${b.isRecommended ? '<span class="badge recommend">â­ æ¨è</span>' : ''}
                                <div class="title">${b.title}</div>
                                <div class="meta">
                                    ${b.author} | ${b.category} | 
                                    <span class="rating">â­ ${b.rating}</span> | 
                                    ğŸ“– ${b.readCount}äººè¯»è¿‡
                                </div>
                            </div>
                        `).join('');
                }
            } catch (e) {
                result.innerHTML = `<p class="error">âŒ é”™è¯¯: ${e.message}</p>`;
            }
        }
        
        async function loadRecommendedBooks() {
            const result = document.getElementById('books-result');
            result.innerHTML = 'åŠ è½½ä¸­...';
            try {
                const res = await fetch(`${API_BASE}/api/academy/books/recommended`);
                const data = await res.json();
                if (data.success) {
                    result.innerHTML = `<p class="success">âœ… æˆåŠŸè·å– ${data.books.length} æœ¬æ¨èä¹¦ç±</p>` + 
                        data.books.map(b => `
                            <div class="book-item">
                                <span class="badge recommend">â­ æ¨è</span>
                                <div class="title">${b.title}</div>
                                <div class="meta">
                                    ${b.author} | <span class="rating">â­ ${b.rating}</span>
                                </div>
                            </div>
                        `).join('');
                }
            } catch (e) {
                result.innerHTML = `<p class="error">âŒ é”™è¯¯: ${e.message}</p>`;
            }
        }
        
        async function searchBooks(keyword) {
            const result = document.getElementById('books-result');
            result.innerHTML = 'æœç´¢ä¸­...';
            try {
                const res = await fetch(`${API_BASE}/api/academy/books/search?keyword=${encodeURIComponent(keyword)}`);
                const data = await res.json();
                if (data.success) {
                    result.innerHTML = `<p class="success">âœ… æœç´¢"${keyword}"æ‰¾åˆ° ${data.total} æœ¬ä¹¦ç±</p>` + 
                        data.books.map(b => `
                            <div class="book-item">
                                <div class="title">${b.title}</div>
                                <div class="meta">${b.author} | ${b.category}</div>
                            </div>
                        `).join('');
                }
            } catch (e) {
                result.innerHTML = `<p class="error">âŒ é”™è¯¯: ${e.message}</p>`;
            }
        }
    </script>
</body>
</html>
