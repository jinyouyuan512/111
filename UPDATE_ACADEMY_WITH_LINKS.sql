-- 为红色新闻和读物添加外链字段
USE jiyi_academy;

-- 添加外链字段
ALTER TABLE red_news ADD COLUMN IF NOT EXISTS external_url VARCHAR(500) COMMENT '外部链接';
ALTER TABLE red_book ADD COLUMN IF NOT EXISTS external_url VARCHAR(500) COMMENT '外部链接（购买/阅读）';

-- 清空旧数据重新插入带链接的数据
TRUNCATE TABLE red_news;
TRUNCATE TABLE red_book;

-- 插入带外链的红色新闻数据（真实河北红色相关新闻源）
INSERT INTO red_news (title, summary, content, category, source, author, view_count, like_count, is_top, is_hot, publish_time, external_url) VALUES
('西柏坡纪念馆：新中国从这里走来', 
 '西柏坡是全国著名的五大革命圣地之一，位于河北省石家庄市平山县中部。这里是解放全中国的最后一个农村指挥所。',
 '西柏坡纪念馆全面展示了中共中央在西柏坡的光辉历程。',
 '纪念活动', '西柏坡纪念馆官网', '编辑部', 125800, 8560, 1, 1, NOW(),
 'http://www.xibaipo.org.cn/'),

('河北省红色旅游经典景区巡礼',
 '河北省拥有丰富的红色旅游资源，西柏坡、狼牙山、白洋淀等红色景区吸引着全国各地的游客前来参观学习。',
 '河北红色旅游资源丰富，是全国重要的革命老区。',
 '教育实践', '河北省文化和旅游厅', '李华', 89200, 5620, 0, 1, DATE_SUB(NOW(), INTERVAL 1 DAY),
 'https://wlt.hebei.gov.cn/'),

('狼牙山五壮士纪念塔',
 '狼牙山五壮士纪念塔位于河北省保定市易县狼牙山棋盘陀峰顶，是为纪念狼牙山五壮士而建。',
 '1941年秋，五位八路军战士为掩护群众和主力撤退，在弹尽粮绝后跳崖。',
 '红色故事', '易县人民政府', '王强', 67500, 4230, 0, 0, DATE_SUB(NOW(), INTERVAL 2 DAY),
 'https://baike.baidu.com/item/%E7%8B%BC%E7%89%99%E5%B1%B1%E4%BA%94%E5%A3%AE%E5%A3%AB/365'),

('中国共产党历史展览馆河北专题',
 '中国共产党历史展览馆设有河北革命历史专题展区，展示河北在中国革命中的重要贡献。',
 '河北是中国革命的重要策源地之一。',
 '党建动态', '中国共产党历史展览馆', '赵刚', 156800, 9870, 0, 1, DATE_SUB(NOW(), INTERVAL 3 DAY),
 'https://www.12371.cn/special/dsb100/'),

('白洋淀雁翎队纪念馆',
 '白洋淀雁翎队纪念馆位于雄安新区安新县白洋淀景区内，展示了雁翎队抗日斗争的光辉历史。',
 '雁翎队是抗日战争时期活跃在白洋淀地区的水上游击队。',
 '纪念活动', '雄安新区管委会', '刘芳', 43200, 2890, 0, 0, DATE_SUB(NOW(), INTERVAL 4 DAY),
 'https://baike.baidu.com/item/%E9%9B%81%E7%BF%8E%E9%98%9F/1179'),

('塞罕坝精神：绿色奇迹的背后',
 '塞罕坝位于河北省承德市围场县，三代塞罕坝人用55年时间创造了荒原变林海的人间奇迹。',
 '塞罕坝精神是牢记使命、艰苦创业、绿色发展的精神。',
 '教育实践', '塞罕坝机械林场', '陈静', 78900, 5120, 0, 0, DATE_SUB(NOW(), INTERVAL 5 DAY),
 'http://www.saihanba.com/'),

('李大钊纪念馆',
 '李大钊纪念馆位于河北省唐山市乐亭县，是为纪念中国共产主义运动先驱李大钊而建。',
 '李大钊是中国共产党的主要创始人之一。',
 '红色故事', '乐亭县人民政府', '周明', 52300, 3450, 0, 0, DATE_SUB(NOW(), INTERVAL 6 DAY),
 'https://baike.baidu.com/item/%E6%9D%8E%E5%A4%A7%E9%92%8A%E7%BA%AA%E5%BF%B5%E9%A6%86/8540'),

('董存瑞烈士陵园',
 '董存瑞烈士陵园位于河北省承德市隆化县，是为纪念舍身炸碉堡的战斗英雄董存瑞而建。',
 '董存瑞是解放战争时期著名的战斗英雄。',
 '纪念活动', '隆化县人民政府', '孙伟', 68700, 4560, 0, 1, DATE_SUB(NOW(), INTERVAL 7 DAY),
 'https://baike.baidu.com/item/%E8%91%A3%E5%AD%98%E7%91%9E%E7%83%88%E5%A3%AB%E9%99%B5%E5%9B%AD'),

('晋察冀边区革命纪念馆',
 '晋察冀边区革命纪念馆位于河北省保定市阜平县城南庄镇，是全国爱国主义教育示范基地。',
 '晋察冀边区是抗日战争时期中国共产党领导的第一个敌后抗日根据地。',
 '纪念活动', '阜平县人民政府', '张伟', 45600, 3120, 0, 0, DATE_SUB(NOW(), INTERVAL 8 DAY),
 'https://baike.baidu.com/item/%E6%99%8B%E5%AF%9F%E5%86%80%E8%BE%B9%E5%8C%BA%E9%9D%A9%E5%91%BD%E7%BA%AA%E5%BF%B5%E9%A6%86'),

('冉庄地道战遗址',
 '冉庄地道战遗址位于河北省保定市清苑区冉庄镇，是抗日战争时期地道战的典型代表。',
 '冉庄地道战是中国人民抗击日本侵略者的伟大创举。',
 '红色故事', '清苑区人民政府', '李明', 58900, 4230, 0, 1, DATE_SUB(NOW(), INTERVAL 9 DAY),
 'https://baike.baidu.com/item/%E5%86%89%E5%BA%84%E5%9C%B0%E9%81%93%E6%88%98%E9%81%97%E5%9D%80');

-- 插入带外链的红色读物数据（链接到京东、当当等购书平台）
INSERT INTO red_book (title, author, publisher, isbn, description, category, page_count, publish_date, rating, rating_count, read_count, favorite_count, is_recommended, has_ebook, tags, external_url) VALUES
('西柏坡：新中国从这里走来', '中共河北省委党史研究室', '河北人民出版社', '978-7-202-12345-6',
 '本书全面记录了中共中央在西柏坡的光辉历程，深入解读了西柏坡精神的科学内涵和时代价值。',
 '党史著作', 380, '2023-07', 4.9, 2580, 125800, 8960, 1, 1, '西柏坡,党史,必读,新中国',
 'https://search.jd.com/Search?keyword=%E8%A5%BF%E6%9F%8F%E5%9D%A1'),

('狼牙山五壮士', '沈重', '人民文学出版社', '978-7-020-12346-7',
 '本书讲述了1941年狼牙山战斗中，五位八路军战士为掩护群众和主力撤退，在弹尽粮绝后跳崖的壮烈故事。',
 '纪实文学', 256, '2021-09', 4.8, 3650, 98500, 6780, 1, 1, '抗战,英雄,经典,狼牙山',
 'https://search.jd.com/Search?keyword=%E7%8B%BC%E7%89%99%E5%B1%B1%E4%BA%94%E5%A3%AE%E5%A3%AB'),

('李大钊传', '朱志敏', '红旗出版社', '978-7-505-12347-8',
 '本书全面记述了中国共产主义运动先驱李大钊的革命生涯，展现了他为传播马克思主义所作出的卓越贡献。',
 '人物传记', 420, '2022-04', 4.7, 1890, 67200, 4560, 1, 1, '李大钊,先驱,传记,马克思主义',
 'https://search.jd.com/Search?keyword=%E6%9D%8E%E5%A4%A7%E9%92%8A%E4%BC%A0'),

('塞罕坝精神', '河北省林业厅', '中国林业出版社', '978-7-503-12348-9',
 '本书记录了三代塞罕坝人艰苦创业、绿色发展的感人事迹，深刻诠释了塞罕坝精神。',
 '纪实文学', 320, '2022-08', 4.8, 2120, 85600, 5890, 1, 1, '塞罕坝,生态,奋斗,绿色发展',
 'https://search.jd.com/Search?keyword=%E5%A1%9E%E7%BD%95%E5%9D%9D%E7%B2%BE%E7%A5%9E'),

('白洋淀纪事', '孙犁', '人民文学出版社', '978-7-020-12349-0',
 '孙犁代表作，以白洋淀为背景，描绘了抗日战争时期冀中人民的斗争生活，是中国现代文学经典。',
 '红色经典', 280, '2020-05', 4.9, 5680, 156800, 12350, 1, 1, '白洋淀,孙犁,文学经典,抗战',
 'https://search.jd.com/Search?keyword=%E7%99%BD%E6%B4%8B%E6%B7%80%E7%BA%AA%E4%BA%8B'),

('晋察冀边区革命史', '中共河北省委党史研究室', '中共党史出版社', '978-7-509-12350-1',
 '本书系统介绍了晋察冀抗日根据地的创建、发展和历史贡献，是研究抗战史的重要著作。',
 '党史著作', 560, '2021-12', 4.6, 980, 32500, 2340, 0, 1, '晋察冀,根据地,抗战,边区',
 'https://search.jd.com/Search?keyword=%E6%99%8B%E5%AF%9F%E5%86%80%E8%BE%B9%E5%8C%BA'),

('红色少年读本：河北英雄故事', '河北省教育厅', '河北少年儿童出版社', '978-7-537-12351-2',
 '精选河北革命英雄故事，用生动的语言和精美的插图，向青少年讲述革命先辈的英勇事迹。',
 '青少年读物', 180, '2023-03', 4.7, 1560, 78900, 5670, 1, 1, '青少年,英雄故事,教育,插图',
 'https://search.jd.com/Search?keyword=%E6%B2%B3%E5%8C%97%E8%8B%B1%E9%9B%84%E6%95%85%E4%BA%8B'),

('董存瑞', '赵寰', '解放军文艺出版社', '978-7-503-12352-3',
 '本书讲述了舍身炸碉堡的战斗英雄董存瑞的英勇事迹，展现了他短暂而光辉的一生。',
 '人物传记', 240, '2022-05', 4.8, 2890, 112500, 7890, 1, 1, '董存瑞,英雄,解放战争,隆化',
 'https://search.jd.com/Search?keyword=%E8%91%A3%E5%AD%98%E7%91%9E'),

('冀中一日', '孙犁等', '花山文艺出版社', '978-7-551-12353-4',
 '1941年5月27日，冀中区党委组织千余名作者，记录下这一天冀中平原上发生的事情，是珍贵的历史文献。',
 '红色经典', 350, '2021-05', 4.6, 1230, 45600, 3210, 0, 1, '冀中,抗战,纪实,群众',
 'https://search.jd.com/Search?keyword=%E5%86%80%E4%B8%AD%E4%B8%80%E6%97%A5'),

('雁翎队', '穆青', '河北人民出版社', '978-7-202-12354-5',
 '本书讲述了抗日战争时期活跃在白洋淀地区的水上游击队——雁翎队的英勇事迹。',
 '纪实文学', 290, '2022-07', 4.7, 1680, 56700, 4120, 1, 1, '雁翎队,白洋淀,抗战,游击队',
 'https://search.jd.com/Search?keyword=%E9%9B%81%E7%BF%8E%E9%98%9F'),

('地道战', '王林', '人民文学出版社', '978-7-020-12355-6',
 '本书以冉庄地道战为背景，讲述了冀中人民利用地道与日本侵略者进行斗争的故事。',
 '红色经典', 260, '2021-08', 4.8, 3450, 89500, 6780, 1, 1, '地道战,冉庄,抗战,冀中',
 'https://search.jd.com/Search?keyword=%E5%9C%B0%E9%81%93%E6%88%98'),

('河北抗战史话', '河北省档案馆', '河北教育出版社', '978-7-543-12356-7',
 '本书以丰富的档案资料为基础，全面记述了河北人民在抗日战争中的英勇斗争。',
 '党史著作', 480, '2022-09', 4.6, 1120, 38700, 2670, 0, 1, '抗战,河北,档案,历史',
 'https://search.jd.com/Search?keyword=%E6%B2%B3%E5%8C%97%E6%8A%97%E6%88%98');

SELECT '数据更新完成！' AS message;
SELECT CONCAT('红色新闻: ', COUNT(*), ' 条') AS news_count FROM red_news;
SELECT CONCAT('红色读物: ', COUNT(*), ' 本') AS book_count FROM red_book;
